<html>

<head>
    <title>API - Yelp Sandbox</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>

<body>
    This is quick demo for how to query the Yelp Fusion API from the front-end. This is using BuilderLabs server-side script to send the query to the API using cors-anywhere (https://www.npmjs.com/package/cors-anywhere ; a NodeJS proxy which adds CORS headers to the request).
    <script>
    // Documentation: https://github.com/builderLabs/Yelp-Fusion-JavaScript
    $(function() {
        // Get my Facebook API key from Local Storage
        var token = localStorage.getItem("yelpToken");
        console.log("my token is: " + token);

        $("#makeCall").click(function() {
            $.ajax({
                url: "https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?location=boston",
                success: function(data, status) {
                    return console.log("The returned data", data);
                },
                beforeSend: function(xhr, settings) { xhr.setRequestHeader('Authorization', 'Bearer ' + token); }
            });
        });

    });
    </script>
    <div>
        <button id="makeCall">Call API</button>
    </div>
</body>

</html>